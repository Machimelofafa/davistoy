<!-- readme.html -->
<div class="readme-content card">
  <h1>Stack-up R<sub>th</sub> Calculator Tutorial</h1>
  
  <div class="toc">
    <h2>Table of Contents</h2>
    <ul>
      <li><a href="#overview">Overview</a></li>
      <li><a href="#getting-started">Getting Started</a></li>
      <li><a href="#inputs">Input Parameters</a></li>
      <li><a href="#results">Understanding Results</a></li>
      <li><a href="#monte-carlo">Monte Carlo Analysis</a></li>
      <li><a href="#mathematical-models">Mathematical Models</a></li>
      <li><a href="#best-practices">Best Practices</a></li>
      <li><a href="#troubleshooting">Troubleshooting</a></li>
    </ul>
  </div>

  <section id="overview">
    <h2>Overview</h2>
    <p>This calculator determines the thermal resistance (R<sub>th</sub>) of multi-layer electronic assemblies, accounting for heat spreading through anisotropic materials. It's particularly useful for analyzing thermal paths in semiconductor packages, power modules, and multi-die stacks.</p>
    
    <h3>Key Features</h3>
    <ul>
      <li><strong>Anisotropic Heat Spreading:</strong> Accounts for different thermal conductivities in XY-plane vs. Z-direction</li>
      <li><strong>Multi-Die Support:</strong> Calculates thermal resistance for parallel heat sources</li>
      <li><strong>Flexible Cooling Models:</strong> Direct R<sub>th</sub> specification or convection calculation</li>
      <li><strong>Sensitivity Analysis:</strong> Identifies critical parameters affecting thermal performance</li>
      <li><strong>Monte Carlo Simulation:</strong> Accounts for manufacturing tolerances and material uncertainties</li>
    </ul>
  </section>

  <section id="getting-started">
    <h2>Getting Started</h2>
    <h3>Quick Start Steps</h3>
    <ol>
      <li><strong>Define Heat Source:</strong> Enter die dimensions (length × width in mm) and number of dies</li>
      <li><strong>Build Stack-Up:</strong> Add layers from die to cooler, specifying thickness and thermal conductivities</li>
      <li><strong>Configure Cooling:</strong> Choose cooling method (none, direct R<sub>th</sub>, or convection)</li>
      <li><strong>Calculate:</strong> Click "Calculate" to run the thermal analysis</li>
      <li><strong>Analyze Results:</strong> Review thermal resistance breakdown and heat spreading visualization</li>
    </ol>
  </section>

  <section id="inputs">
    <h2>Input Parameters</h2>
    
    <h3>Heat Source (Die) Parameters</h3>
    <table class="param-table">
      <tr>
        <th>Parameter</th>
        <th>Units</th>
        <th>Description</th>
        <th>Typical Range</th>
      </tr>
      <tr>
        <td>Length</td>
        <td>mm</td>
        <td>Die footprint length (Y-direction)</td>
        <td>1-20 mm</td>
      </tr>
      <tr>
        <td>Width</td>
        <td>mm</td>
        <td>Die footprint width (X-direction)</td>
        <td>1-20 mm</td>
      </tr>
      <tr>
        <td># of dies</td>
        <td>-</td>
        <td>Number of identical dies in parallel</td>
        <td>1-10</td>
      </tr>
    </table>

    <h3>Material Stack-Up Parameters</h3>
    <p>Build your thermal stack from die to cooler, layer by layer:</p>
    
    <table class="param-table">
      <tr>
        <th>Parameter</th>
        <th>Units</th>
        <th>Description</th>
        <th>Typical Values</th>
      </tr>
      <tr>
        <td>Material</td>
        <td>-</td>
        <td>Descriptive name for reference</td>
        <td>Die attach, Substrate, TIM, etc.</td>
      </tr>
      <tr>
        <td>t</td>
        <td>μm</td>
        <td>Layer thickness</td>
        <td>10-2000 μm</td>
      </tr>
      <tr>
        <td>k<sub>xy</sub></td>
        <td>W/(m·K)</td>
        <td>In-plane thermal conductivity</td>
        <td>0.1-400 W/(m·K)</td>
      </tr>
      <tr>
        <td>k<sub>z</sub></td>
        <td>W/(m·K)</td>
        <td>Through-thickness thermal conductivity</td>
        <td>0.1-400 W/(m·K)</td>
      </tr>
    </table>

    <h4>Common Material Properties</h4>
    <table class="material-table">
      <tr>
        <th>Material</th>
        <th>k<sub>xy</sub> [W/(m·K)]</th>
        <th>k<sub>z</sub> [W/(m·K)]</th>
        <th>Notes</th>
      </tr>
      <tr>
        <td>Silicon Die</td>
        <td>150</td>
        <td>150</td>
        <td>Isotropic semiconductor</td>
      </tr>
      <tr>
        <td>Solder (SAC305)</td>
        <td>60</td>
        <td>60</td>
        <td>Die attach, interconnects</td>
      </tr>
      <tr>
        <td>Copper</td>
        <td>393</td>
        <td>393</td>
        <td>Heat spreader, substrate</td>
      </tr>
      <tr>
        <td>Alumina (Al₂O₃)</td>
        <td>25</td>
        <td>25</td>
        <td>Ceramic substrate</td>
      </tr>
      <tr>
        <td>FR4 PCB</td>
        <td>0.3</td>
        <td>0.3</td>
        <td>Standard PCB material</td>
      </tr>
      <tr>
        <td>Thermal Interface</td>
        <td>1-5</td>
        <td>1-5</td>
        <td>TIM pads, thermal grease</td>
      </tr>
    </table>

    <h3>Cooler/Base Configuration</h3>
    <ul>
      <li><strong>None:</strong> Calculates only stack conduction (infinite ambient resistance)</li>
      <li><strong>Direct R<sub>th</sub>:</strong> Specify cooler thermal resistance directly</li>
      <li><strong>Calculated Convection:</strong> Uses heat transfer coefficient and final heat spreading area</li>
    </ul>

    <h3>Monte Carlo Parameters</h3>
    <ul>
      <li><strong>Iterations:</strong> Number of random simulations (100-1000 recommended)</li>
      <li><strong>t uncertainty:</strong> Thickness variation percentage (±%)</li>
      <li><strong>k uncertainty:</strong> Conductivity variation percentage (±%)</li>
    </ul>
  </section>

  <section id="results">
    <h2>Understanding Results</h2>
    
    <h3>Primary Outputs</h3>
    <ul>
      <li><strong>R<sub>th</sub> / die:</strong> Thermal resistance from one die to ambient [°C/W]</li>
      <li><strong>Total stack R<sub>th</sub>:</strong> Equivalent resistance for all dies in parallel [°C/W]</li>
    </ul>

    <h3>Heat Spreading Visualization</h3>
    <p>The 2D cone diagram shows how heat spreads through your stack:</p>
    <ul>
      <li>Colors represent different layers</li>
      <li>Width expansion shows heat spreading effect</li>
      <li>Thicker layers and higher k<sub>xy</sub>/k<sub>z</sub> ratios create more spreading</li>
    </ul>

    <h3>Summary Table Columns</h3>
    <table class="results-table">
      <tr>
        <th>Column</th>
        <th>Description</th>
        <th>Interpretation</th>
      </tr>
      <tr>
        <td>R<sub>th</sub> (total stack)</td>
        <td>Layer thermal resistance for all dies</td>
        <td>Individual layer contribution</td>
      </tr>
      <tr>
        <td>Cumulative R<sub>th</sub></td>
        <td>Running total through stack</td>
        <td>Resistance accumulation</td>
      </tr>
      <tr>
        <td>Length (Y) at bottom</td>
        <td>Heat path width after spreading</td>
        <td>Spreading effectiveness</td>
      </tr>
      <tr>
        <td>Contribution [%]</td>
        <td>Layer's share of total resistance</td>
        <td>Identifies thermal bottlenecks</td>
      </tr>
      <tr>
        <td>Sensitivity index [%]</td>
        <td>Parameter sensitivity magnitude</td>
        <td>Critical parameters for optimization</td>
      </tr>
    </table>

    <h3>Cumulative R<sub>th</sub> Graph</h3>
    <p>This plot shows thermal resistance buildup through the stack. Steep sections indicate high-resistance layers that may need attention.</p>
  </section>

  <section id="monte-carlo">
    <h2>Monte Carlo Analysis</h2>
    
    <h3>Purpose</h3>
    <p>Monte Carlo simulation accounts for manufacturing tolerances and material property uncertainties by running hundreds of calculations with randomly varied parameters.</p>

    <h3>Results Interpretation</h3>
    <ul>
      <li><strong>Mean:</strong> Expected R<sub>th</sub> value</li>
      <li><strong>Standard deviation (σ):</strong> Variability measure</li>
      <li><strong>Histogram:</strong> R<sub>th</sub> distribution shape</li>
      <li><strong>Critical layer:</strong> Layer most often determining maximum resistance</li>
    </ul>

    <h3>Design Guidelines</h3>
    <ul>
      <li>Target: Mean + 3σ ≤ specification limit (99.7% yield)</li>
      <li>Wide distributions indicate high sensitivity to tolerances</li>
      <li>Non-normal distributions may indicate design robustness issues</li>
    </ul>
  </section>

  <section id="mathematical-models">
    <h2>Mathematical Models</h2>
    
    <h3>Heat Spreading Model</h3>
    <p>The calculator uses a cone-spreading model for anisotropic materials:</p>
    
    <div class="math-section">
      <h4>Spreading Angle</h4>
      <p>α = arctan(√(k<sub>xy</sub>/k<sub>z</sub>))</p>
      <p>Where α is the half-angle of the heat spreading cone.</p>
    </div>

    <div class="math-section">
      <h4>Area Evolution</h4>
      <p>For each infinitesimal layer dz:</p>
      <p>dL = dW = 2·dz·tan(α)</p>
      <p>Where L and W are the length and width of the heat spreading area.</p>
    </div>

    <div class="math-section">
      <h4>Thermal Resistance</h4>
      <p>R<sub>th</sub> = ∫ (dz) / (k<sub>z</sub> · A(z))</p>
      <p>Where A(z) is the cross-sectional area at height z.</p>
    </div>

    <h3>Discretization Method</h3>
    <p>Each layer is divided into 1 μm slices for accurate integration:</p>
    <ul>
      <li>Area calculated at each slice</li>
      <li>Resistance accumulated slice by slice</li>
      <li>Heat spreading updated continuously</li>
    </ul>

    <h3>Multi-Die Modeling</h3>
    <p>For N parallel dies:</p>
    <ul>
      <li>Individual die R<sub>th</sub> = R<sub>stack</sub> + R<sub>cooler</sub></li>
      <li>Total R<sub>th</sub> = (Individual R<sub>th</sub>) / N</li>
      <li>Assumes identical dies with independent thermal paths</li>
    </ul>

    <h3>Cooling Models</h3>
    <h4>Convection Model</h4>
    <p>R<sub>cooler</sub> = 1 / (h · A<sub>final</sub>)</p>
    <p>Where h is the heat transfer coefficient and A<sub>final</sub> is the final spreading area.</p>

    <h4>Direct Model</h4>
    <p>R<sub>cooler</sub> = specified value</p>
    <p>Used when cooler R<sub>th</sub> is known from testing or detailed modeling.</p>
  </section>

  <section id="best-practices">
    <h2>Best Practices</h2>
    
    <h3>Input Guidelines</h3>
    <ul>
      <li><strong>Layer Order:</strong> Build stack from die to cooler in physical sequence</li>
      <li><strong>Material Properties:</strong> Use temperature-dependent values at expected operating temperature</li>
      <li><strong>Thickness Accuracy:</strong> Verify actual layer thicknesses, especially for thin films</li>
      <li><strong>Anisotropy:</strong> Consider material grain structure and manufacturing orientation</li>
    </ul>

    <h3>Model Validation</h3>
    <ul>
      <li>Compare with thermal test data when available</li>
      <li>Cross-check with finite element analysis for complex geometries</li>
      <li>Verify spreading assumptions are reasonable for your geometry</li>
    </ul>

    <h3>Design Optimization</h3>
    <ul>
      <li>Focus on layers with highest contribution percentages</li>
      <li>Consider both thickness and conductivity improvements</li>
      <li>Use sensitivity analysis to prioritize design changes</li>
      <li>Evaluate trade-offs between spreading and direct conduction</li>
    </ul>
  </section>

  <section id="troubleshooting">
    <h2>Troubleshooting</h2>
    
    <h3>Common Issues</h3>
    <table class="trouble-table">
      <tr>
        <th>Problem</th>
        <th>Possible Cause</th>
        <th>Solution</th>
      </tr>
      <tr>
        <td>Very high R<sub>th</sub> values</td>
        <td>Low conductivity layers, small die area</td>
        <td>Check material properties, verify units</td>
      </tr>
      <tr>
        <td>Unexpected spreading behavior</td>
        <td>High k<sub>xy</sub>/k<sub>z</sub> ratios</td>
        <td>Verify anisotropic properties are correct</td>
      </tr>
      <tr>
        <td>Monte Carlo shows wide distribution</td>
        <td>High parameter sensitivities</td>
        <td>Tighten tolerances or modify design</td>
      </tr>
      <tr>
        <td>Calculation errors</td>
        <td>Invalid parameter values</td>
        <td>Check for positive, finite values</td>
      </tr>
    </table>

    <h3>Model Limitations</h3>
    <ul>
      <li><strong>1D Spreading:</strong> Assumes uniform spreading in XY plane</li>
      <li><strong>Perfect Interfaces:</strong> No interface thermal resistance modeled</li>
      <li><strong>Steady State:</strong> No transient thermal effects</li>
      <li><strong>Linear Materials:</strong> Temperature-independent properties assumed</li>
    </ul>

    <h3>When to Use Detailed FEA</h3>
    <ul>
      <li>Complex 3D geometries</li>
      <li>Non-uniform die layouts</li>
      <li>Significant interface resistances</li>
      <li>Temperature-dependent material properties</li>
      <li>Detailed temperature distribution needed</li>
    </ul>
  </section>

  <div class="footer">
    <p><em>This calculator provides engineering estimates for thermal design. For critical applications, validate results with detailed analysis and thermal testing.</em></p>
  </div>
</div>

<style>
.readme-content {
  max-width: 900px;
  margin: 0 auto;
  padding: 20px;
  line-height: 1.6;
}

.readme-content h1 {
  text-align: center;
}

body:not(.dark-theme) .readme-content {
  background: #f0f0f0;
  color: #111;
}

body.dark-theme .readme-content {
  background: #172938;
  color: #E8EEF2;
}

.toc {
  background: #dfe9f2;
  border-left: 4px solid #007acc;
  padding: 12px;
  border-radius: 4px;
  margin-bottom: 30px;
}

body.dark-theme .toc {
  background: #102233;
  border-left-color: #4FC3F7;
}

.toc a {
  color: #007acc;
  text-decoration: none;
}

body.dark-theme .toc a {
  color: #4FC3F7;
}

.toc a:hover {
  text-decoration: underline;
}

.math-section {
  background: #eaeaea;
  padding: 10px;
  margin: 15px 0;
  border-left: 3px solid #006bb3;
  border-radius: 4px;
}

body.dark-theme .math-section {
  background: #102233;
  border-left-color: #9ED1F5;
}

.math-section p {
  font-family: 'Courier New', monospace;
}

@media (max-width: 768px) {
  .readme-content {
    padding: 15px;
  }
}
</style>
